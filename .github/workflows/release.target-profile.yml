name: Release OpenWrt device firmware

permissions:
  actions: write

on:
  workflow_call:
    inputs:
      target:
        required: true
        type: string
      subtarget:
        required: true
        type: string
      profile:
        required: true
        type: string

  workflow_dispatch:
    inputs:
      target:
        required: true
        type: string
      subtarget:
        required: true
        type: string
      profile:
        required: true
        type: string

jobs:

  dummy:
    name: Build firmware
    runs-on: ubuntu-22.04

    steps:
      - name: test
        run: echo

#  steps:
#    - name:
#      Download artifacts
#        uses:
#          actions/download-artifact@v4
#
#      - name:
#          Make release
#        run: |
#          ls -laFR
#          set -xe
#          shopt -s nullglob
#          RELDATE="$(date +'%Y-%m-%d %H:%M')"
#          NAME="Auto-Build $RELDATE"
#          TAGNAME="autobuild-$(date +'%Y-%m-%d-%H-%M')"
#          gh release create "$TAGNAME" --repo ${{ github.repository }} --target "main" --title "$NAME" artifact/targets/ath79/generic/*.{bin,buildinfo,json,manifest} artifact/targets/ath79/generic/sha256sums
#          echo "tag_name=${TAGNAME}" >> $GITHUB_OUTPUT
#          echo "rel_date=${RELDATE}" >> $GITHUB_OUTPUT
#        env:
#          GITHUB_TOKEN:
#            ${{ github.token }}
